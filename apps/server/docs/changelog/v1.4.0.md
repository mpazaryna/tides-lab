# v1.4.0 - 2025-08-07

This release introduces the new Raw JSON Export tool and comprehensive documentation enhancements, providing complete data access capabilities and improved developer experience.

## Added

- **Raw JSON Export Tool**: New `tide_get_raw_json` MCP tool for complete data access
  - Retrieves full, unprocessed tide data directly from R2 storage
  - Returns complete JSON structure with all nested arrays (flow_sessions, energy_updates, task_links)
  - Perfect for data export, debugging, and clients needing complete dataset access
  - Comprehensive error handling for non-existent tides
- **Enhanced Documentation**: 
  - Updated README.md with v1.3.0 Cloudflare Agents features
  - Created CONTRIBUTING.md with complete development guidelines
  - Added docs/architecture.md with comprehensive system design
  - Enhanced server.ts tool documentation with React Native usage patterns

## Enhanced

- **Tool Organization**: Added `getTideRawJson` function to tide-analytics.ts module
- **E2E Test Coverage**: Extended health-check.test.ts with Raw JSON Export validation
  - Tests complete data structure retrieval across all environments
  - Validates proper error handling for invalid requests
  - Confirms tool availability in all deployed environments
- **Type Safety**: Improved TypeScript integration with proper return type definitions
- **Module Exports**: Updated tools/index.ts with new function export and documentation

## Technical Implementation

- **Function**: `getTideRawJson(params: { tide_id: string }, storage: TideStorage)`
- **MCP Tool**: `tide_get_raw_json` with simple tide_id input schema
- **Response Format**: `{ success: boolean; data?: Tide; error?: string }`
- **Server Integration**: Comprehensive JSDoc documentation with @mcp_tool annotations
- **Test Coverage**: 100% function coverage with unit and E2E tests

## Deployment

- **Production Ready**: Deployed across all three Cloudflare environments
  - Development (tides-001): ✅ 11 tools available
  - Staging (tides-002): ✅ 11 tools available  
  - Production (tides-003): ✅ 11 tools available
- **E2E Validated**: All 158 tests passing across environments
- **Tool Registration**: Successfully registered in MCP server with proper schema

## Breaking Changes

None. This release is fully backward compatible.

## Migration Guide

No migration required. The new tool is additive and doesn't affect existing functionality.

## Usage Example

```typescript
// Get complete raw JSON data
const result = await mcpClient.callTool('tide_get_raw_json', {
  tide_id: "tide_1234567890_abc"
});

if (result.success) {
  // Access complete data structure
  const allSessions = result.data.flow_sessions;
  const allEnergy = result.data.energy_updates;
  const allTasks = result.data.task_links;
  
  // Export or process as needed
  await saveToFile(JSON.stringify(result.data, null, 2));
}
```