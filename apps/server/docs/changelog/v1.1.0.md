# v1.1.0 - 2025-08-05

This release introduces multi-environment deployment capabilities and enhanced storage architecture with critical security fixes.

## Added

- **Multi-environment deployment**: Three pristine environments (tides-001, tides-002, tides-003) for development, staging, and production workflows
- **Enhanced D1/R2 storage architecture**: Optimized hybrid storage with analytics tables, composite indexes, and performance improvements
- **Automated health check testing**: Comprehensive test suite that validates all environments by creating test tides and verifying functionality
- **Test user seeding**: 5 pre-configured test users with API keys for each environment to enable immediate testing
- **Environment-specific tooling**: Deployment scripts, database initialization, and configuration management for isolated environments
- **Storage benchmarking infrastructure**: Tools for empirical performance comparison between storage solutions
- **Authentication security test suite**: Comprehensive auth-check.test.ts to validate unauthorized access prevention

## Enhanced

- **Database schema**: Added analytics tables (`tide_analytics`, `user_activity_rollups`, `flow_session_summary`) for real-time metrics
- **Query performance**: Composite indexes for complex filtering and optimized D1/R2 synchronization patterns
- **JSON response formatting**: Fixed pretty-printing issue in MCP tool responses for cleaner API integration

## Security

- **CRITICAL FIX**: Resolved authentication bypass vulnerability where unauthenticated requests were processed
- **Authentication enforcement**: All MCP endpoints now properly reject unauthorized requests with HTTP 401
- **Multi-environment security**: Authentication fix deployed to all production environments (tides-001, tides-002, tides-003)

## Infrastructure

- **Isolated D1 databases**: Separate database per environment with enhanced schema and full test data
- **R2 bucket management**: Environment-specific object storage with proper access patterns
- **Multi-user authentication**: API key validation and user context management across all environments

## Breaking Changes

- Authentication now properly enforced - all requests require valid API keys
- Unauthenticated requests will receive HTTP 401 responses

## Migration Guide

Ensure all API requests include proper authorization headers:
```
Authorization: Bearer tides_testuser_001
```